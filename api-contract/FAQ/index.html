<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<title data-react-helmet="true">FAQ | polkadot{.js}</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://polkadot.js.org/docs/api-contract/FAQ"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="FAQ | polkadot{.js}"><meta data-react-helmet="true" name="description" content="The list will be updated/expanded as questions come up, dealing with some common issues that API users find."><meta data-react-helmet="true" property="og:description" content="The list will be updated/expanded as questions come up, dealing with some common issues that API users find."><link data-react-helmet="true" rel="icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://polkadot.js.org/docs/api-contract/FAQ"><link data-react-helmet="true" rel="alternate" href="https://polkadot.js.org/docs/api-contract/FAQ" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://polkadot.js.org/docs/api-contract/FAQ" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.df94174b.css">
<link rel="preload" href="/docs/assets/js/runtime~main.45828fcd.js" as="script">
<link rel="preload" href="/docs/assets/js/main.ba633b54.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/logo.svg" alt="polkadot{.js}" class="themedImage_1VuW themedImage--light_3UqQ"><img src="/docs/img/logo.svg" alt="polkadot{.js}" class="themedImage_1VuW themedImage--dark_hz6m"></div><b class="navbar__title">polkadot{.js}</b></a></div><div class="navbar__items navbar__items--right"><a href="https://polkadot.js.org/apps/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Apps UI (Wallet)<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/polkadot-js/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_71bT toggle_3Zt9 toggleDisabled_3cF-"><div class="toggleTrack_32Fl" role="button" tabindex="-1"><div class="toggleTrackCheck_3lV7"><span class="toggleIcon_O4iE">ðŸŒœ</span></div><div class="toggleTrackX_S2yS"><span class="toggleIcon_O4iE">ðŸŒž</span></div><div class="toggleTrackThumb_xI_Z"></div></div><input type="checkbox" class="toggleScreenReader_28Tw" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_35hR" type="button"></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/api">API</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/substrate">Substrate Metadata</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/keyring">Keyring</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/util-crypto">Crypto Utilities</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_2fq0" href="/docs/api-contract">Contracts (API)</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/api-contract">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" tabindex="0" href="/docs/api-contract/start">Getting started</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/api-contract/FAQ">FAQ</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/ui-identicon">Identicon (UI)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/ui-keyring">Keyring (UI)</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_2fq0" href="/docs/extension">Extension</a></div></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD theme-doc-toc-mobile tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>FAQ</h1></header><p>The list will be updated/expanded as questions come up, dealing with some common issues that API users find.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="my-abi-cannot-be-parsed">My ABI cannot be parsed<a class="hash-link" href="#my-abi-cannot-be-parsed" title="Direct link to heading">â€‹</a></h2><p>When passing an older pre ink! 3.0-rc1 version of the ABI, you will have an &quot;Invalid JSON ABI structure supplied, expected a recent metadata version&quot; error being returned. As explained in the <a href="/docs/api-contract/start/install">getting started guide</a> as of <code>@polkadot/api-contract</code> 2.2+ the older ink! 2.1 versions are not supported.</p><p>If you are using an older version you would need to use an older version of the API or upgrade your contracts to ink! 3.0.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="after-upgrading-to-25-im-missing-issuccessiserror">After upgrading to 2.5+ I&#x27;m missing isSuccess/isError<a class="hash-link" href="#after-upgrading-to-25-im-missing-issuccessiserror" title="Direct link to heading">â€‹</a></h2><p>In earlier versions of Substrate the call results via read had a slightly different interface to what it available now. Specifically on the <code>result</code> structure retrieved via read calls <code>isOk</code> was named <code>isSuccess</code> (and <code>isErr</code> was named <code>isError</code>). Since the <code>Contract</code> interface follows the Substrate convention these changes to <code>is{Ok,Err}</code> has been applied alongside the Substrate update to the <code>ContractExecResult</code> structure.</p><p>In addition <code>asErr</code> (unlike the older <code>asError</code>) now also has a full error enum (mapping to <code>DispatchError</code>) containing failures, unlike the older interface where this was not available. On older chains due to lack of information this will always be <code>Other</code>, while on newer chains the result will be fully populated.</p><p>The <code>Contract</code> interface, despite these underlying naming changes, transparently maps older responses (on older, not yet upgraded chains) to the newer structure, so while there is an change to the JS code use required to cater for this new structure, it can be used against both old and new chains with a transparent mapping between.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="why-is-there-a-snake_case-vs-camelcase-difference">Why is there a snake_case vs camelCase difference<a class="hash-link" href="#why-is-there-a-snake_case-vs-camelcase-difference" title="Direct link to heading">â€‹</a></h2><p>The API always tries to use <code>camelCase</code> naming where available. This aligns with the de-facto standards that are generally (not always!) used in JS interfaces. This means that when decorating the ABIs into <code>contract.&lt;query|tx&gt;.methodName</code> the <code>methodName</code> part would be in camelCase format.</p><p>An example of this would be in the erc20 ink! ABI - the method in the above would be <code>balance_of</code> however the API (for consistency with the full suite of libraries), decorate this as <code>contract.query.balanceOf</code>. When calling the <code>.read</code> or <code>.exec</code> directly on the contract, you can still specify the original ABI identifier, e.g. <code>contract.read(&#x27;balance_of&#x27;, ...)</code>.</p><h2 class="anchor anchorWithStickyNavbar_31ik" id="how-do-i-subscribe-to-a-contract-query">How do I subscribe to a contract query?<a class="hash-link" href="#how-do-i-subscribe-to-a-contract-query" title="Direct link to heading">â€‹</a></h2><p>Subscriptions, and queries to the raw storage are on their way! Unfortunately until then there isn&#x27;t a proper way to subscribe to a contract query. A temporary workaround is to subscribe to <code>api.query.contracts.contractInfoOf</code>.</p><div class="codeBlockContainer_K1bP language-javascript theme-code-block"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> unsub </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> api</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">contracts</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">contractInfoOf</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">contractAddress</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">async</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:rgb(137, 221, 255)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Perform a read of the contract&#x27;s `get` message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">const</span><span class="token plain"> callValue </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="font-style:italic">await</span><span class="token plain"> contract</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">query</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">get</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">alicePair</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">address</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> gasLimit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// Do something with callValue</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>But this workaround is not without drawbacks. Since the callback will be executed every time the contract&#x27;s storage is affected you will ultimately end up calling your contract query more often than necessary.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/polkadot-js/docs/edit/master/docs/api-contract/FAQ.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/api-contract/start/contract.tx"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Contract Tx</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/ui-identicon"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Overview</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#my-abi-cannot-be-parsed" class="table-of-contents__link toc-highlight">My ABI cannot be parsed</a></li><li><a href="#after-upgrading-to-25-im-missing-issuccessiserror" class="table-of-contents__link toc-highlight">After upgrading to 2.5+ I&#39;m missing isSuccess/isError</a></li><li><a href="#why-is-there-a-snake_case-vs-camelcase-difference" class="table-of-contents__link toc-highlight">Why is there a snake_case vs camelCase difference</a></li><li><a href="#how-do-i-subscribe-to-a-contract-query" class="table-of-contents__link toc-highlight">How do I subscribe to a contract query?</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.45828fcd.js"></script>
<script src="/docs/assets/js/main.ba633b54.js"></script>
</body>
</html>